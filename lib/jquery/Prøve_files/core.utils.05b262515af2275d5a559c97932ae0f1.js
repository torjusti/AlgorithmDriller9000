(function($){$.ui_class={'loading':'ui-state-loading','editing':'ui-state-editing','highlight':'ui-state-highlight','hover':'ui-state-hover','focus':'ui-state-focus','chosen':'ui-state-chosen','disable':'ui-state-disable','disabled':'ui-state-disabled','published':'ui-state-published','selected':'ui-state-selected','nonselect':'ui-state-nonselect','nondrag':'ui-state-nondrag','delete':'ui-icon-delete','folder':'ui-icon-folder','goal':'ui-icon-goal','add':'ui-icon-plus-circle','edit':'ui-icon-pencil','success':'ui-icon-tick','warn':'ui-icon--exclamation--frame','error':'ui-icon--exclamation-red','info':'ui-icon-information','open':'ui-tree-state-open','treenode':'ui-tree-node','closed':'ui-tree-state-closed','expandable':'ui-tree-expandable','last':'ui-tree-last','hitarea':'ui-tree-hitarea','expanded':'ui-tree-state-expanded','empty':'ui-tree-empty','newnode':'ui-tree-newnode'};$(document).ajaxError(function(event,request,settings){if(typeof settings.error==='undefined'){if(typeof i18n!=='undefined'){$.error(i18n('AJAX_REQUEST_ERROR'));}else if(typeof window.Fronter.i18n!=='undefined'){window.Fronter.i18n.translate('AJAX_REQUEST_ERROR').then(function(translated){$.error(translated.AJAX_REQUEST_ERROR);});}}});$.getJSONWrapper=function(options){if(options.loading===null||options.loading===true){$.loading();}
var type=(options.params.type===null)?'GET':options.params.type,defaultContentType=(type==='POST')?'application/x-www-form-urlencoded; charset=utf-8':'application/json; charset=utf-8',resp=jQuery.ajax({type:type,url:options.url,async:(options.async===null)?true:options.async,contentType:options.contentType?options.contentType:defaultContentType,dataType:'json',data:options.params,success:function(xhr,response){var status='';switch(response){case'success':status='success';if(xhr===null){status='error';}
else if(xhr.status==='error'){status='error';}
break;default:status='error';break;}
switch(status){case'success':if(typeof options.success==='function'){options.success(xhr,response);}
break;default:if(xhr===null){options.error({'error_message':i18n('AJAX_GENERAL_ERROR')},'error');}
else if(typeof options.error==='function'){options.error(xhr,response);}}},error:function(xhr,thrownError){options.error(thrownError);}});if(options.loading===null||options.loading===true){$.loadingEnd();}
return resp;};$.viewport=function(){return{x:$(window).scrollLeft(),y:$(window).scrollTop(),cx:$(window).width(),cy:$(window).height()};};$.fn.removeAttrs=function(attr){return this.each(function(){$(this).removeAttr(attr);});};$.fn.disable=function(){return this.each(function(){$(this).prop('disabled',true);});};$.fn.enable=function(){return this.each(function(){$(this).prop('disabled',false);});};$.addHover=function(items){if(!$(items).length){return false;}
$(items).mouseover(function(){$(this).addClass($.ui_class.hover);});$(items).mouseout(function(){$(this).removeClass($.ui_class.hover);});};$.loading=function(displayPosition){var $loading,position=null,bindMouseEvent=(displayPosition===null);if(!displayPosition){position={top:'50%',left:'50%'};}else{position=displayPosition;}
if($('.mouseLoading').length){$loading=$('.mouseLoading');}else{$loading=$('<div>').addClass('mouseLoading').css({'top':position.top,'left':position.left}).hide().appendTo('body');}
$loading.css({top:position.top,left:position.left});if(bindMouseEvent){$(window).on('mousemove.loading',function(event){$loading.css({top:event.clientY+ 15,left:event.clientX+ 15});});}
$('.mouseLoading').show();};$.loadingEnd=function(){$(window).off('mousemove.loading');$('.mouseLoading').fadeOut('fast');};$.checkOptions=function(opt){if(typeof opt==='string'){var options=$.extend({},{text:opt});return options;}
return opt;};$.success=function(opt){var options=$.checkOptions(opt);options=$.extend(options,{type:'success'});$.noticeAdd(options,'success');};$.error=function(opt){var options=$.checkOptions(opt);options=$.extend(options,{type:'error'});$.noticeAdd(options,'error');};$.warn=function(opt){var options=$.checkOptions(opt);options=$.extend(options,{type:'warning'});$.noticeAdd(options,'warn');};$.growl=function(title,message,type,time){var options=$.extend({},{'text':'<strong>'+ title+'</strong>'+ message,'type':type||'notice','stayTime':time||5000});$.noticeAdd(options,'growl');};$.notice=$.system=$.info=function(opt){var options=$.checkOptions(opt);$.noticeAdd(options,'notice');};$.noticeAdd=function(opt){var defaults={'inEffect':{'opacity':'show'},'inEffectDuration':500,'stayTime':5000,'text':'','stay':false,'type':'notice','icon':null},options,noticeWrapAll,pre,noticeItemOuter,noticeItemInner,noticeItemClose;options=$.extend({},defaults,opt);if(options.type==='error'){pre='error';options.stay=false;}else{pre='notice';}
noticeWrapAll=(!$('.'+ pre+'-wrap').length)?$('<div>').addClass(pre+'-wrap').prependTo('body'):$('.'+ pre+'-wrap');noticeItemOuter=$('<div>').addClass(pre+'-item-wrapper');noticeItemInner=$('<div>').hide().addClass(pre+'-item '+ options.type).appendTo(noticeWrapAll).html('<p><span class="ui-icon"></span>'+ options.text+'</p>').animate(options.inEffect,options.inEffectDuration).wrap(noticeItemOuter);noticeItemClose=$('<div>').addClass(pre+'-item-close').prependTo(noticeItemInner).html('x').on('click',function(){$.hideSlow(noticeItemInner);});if(navigator.userAgent.match(/MSIE 6/i)){noticeWrapAll.css({top:document.documentElement.scrollTop});}
if(!options.stay){setTimeout(function(){$.hideSlow(noticeItemInner);},options.stayTime);}};$.hideSlow=$.noticeRemove=function(obj){obj.animate({opacity:'0'},100,function(){obj.parent().animate({height:'0'},100,function(){obj.parent().remove();if(obj.attr('id')==='dialog'){$('body').css('overflow','auto');$('.dialog-wrap').animate({opacity:'0'},200,function(){$(this).remove();});}});});};$.dialogBox=function(opt){var defaults={inEffect:{opacity:1},inEffectDuration:100,stayTime:3000,measurement:'px',width:250,padding:8,text:'',onload:null,onclose:null},options,dialogWrapAll,dialogItemOuter,dialogItemInner,dialogItemPosition,dialogContent;options=$.extend({},defaults,opt);dialogWrapAll=(!$('.dialog-wrap').length)?$('<div>').addClass('dialog-wrap').attr('align','center').appendTo('body'):$('.dialog-wrap');dialogItemPosition=$('<div>').addClass('dialog-item-position').css({'width':options.width+ options.measurement});dialogItemOuter=$('<div>').addClass('dialog-item-wrapper').css({'width':options.width+ options.measurement});dialogContent=$('<div>').addClass('dialog-item-content').css({'width':(options.width- options.padding)+ options.measurement,'margin-left':(options.padding/2)+ options.measurement});dialogItemInner=$('<div>').attr('id','dialog').addClass('dialog-item');if(typeof options.text==='object'){dialogItemInner.append(options.text);}else{dialogItemInner.html(options.text);}
dialogItemInner.appendTo(dialogWrapAll).wrap(dialogItemPosition).wrap(dialogItemOuter).wrap(dialogContent);$('body').css('overflow','hidden');$('<div>').addClass('dialog-wrap overlay unselect').appendTo('body');if(navigator.userAgent.match(/MSIE 6/i)){dialogWrapAll.css({top:document.documentElement.scrollTop});}
if(options.onload){options.onload(dialogItemInner,options.onclose);}
$.dialogPosition();dialogItemInner.animate(options.inEffect,options.inEffectDuration);$(document).on('keydown',function(e){if(e.keyCode===27){$.dialogRemove(dialogItemInner,options.onclose);}});window.onresize=function(){$.dialogPosition();};};$.dialogRemove=function(obj,close){if(typeof close==='function'){close($(obj).children());}
$.hideSlow(obj);};$.dialogPosition=function(){var num=Math.round($(window).height()/ 2) - ($('.dialog-item-wrapper').height() / 2);
if(num<0){num=0;}else if(num>175){num=175;}
$('.dialog-item-position').css('margin-top',num+'px');};$.addSaveButton=function(element,onClickFunction){var buttonMarkup='<button class="submit save-content" type="button">'+'<span>'+ i18n('SAVE')+'</span>'+'</button>';if($('button.save-content',element).length===0){$(element).prepend($(buttonMarkup));return $(document).find('button.save-content').on('click',onClickFunction);}};$.fn.addSaveButton=function(onClickFunction){return this.each(function(){new $.addSaveButton(this,onClickFunction);});};$.confirm=function(el,opt,str){var element=$(el),strings=$.extend({},{'header':'Warning','text':'Are you sure?','dont':'CANCEL','ok':'Ok'},str),options=$.extend({},{'action':null,'cancel':null},opt),dialogContent='<div class="dialog-header">'+'<h2>'+ strings.header+'</h2>'+'</div>'+'<div class="dialog-content">'+'<p>'+ strings.text+'</p>'+'<div class="line buttons">'+'<button type="button" id="cancel_delete" class="submit cancel">'+'<span>'+ strings.dont+'</span>'+'</button>'+'<button type="button" id="confirm_delete" class="submit">'+'<span>'+ strings.ok+'</span>'+'</button>'+'</div>';$.dialogBox({width:300,text:dialogContent,onload:function(confirm){var confirmButtonHasFocus=true;$('#confirm_delete').focus();$(document).on('keydown',function(e){var pressedKey=e.keyCode||e.which;if(pressedKey===9){if(confirmButtonHasFocus){$('#cancel_delete').focus();confirmButtonHasFocus=false;}else{$('#confirm_delete').focus();confirmButtonHasFocus=true;}
e.preventDefault();e.stopPropagation();return false;}});$('#cancel_delete').off('click').on('click',function(){if(typeof options.cancel==='function'){options.cancel(element);}
$.hideSlow(confirm);});$('#confirm_delete').off('click').on('click',function(){$(this).off('click');options.action(element);$(document).off('keydown');$.hideSlow(confirm);}).focus();}});};$.fn.confirm=function(opt,str){return this.each(function(){(new $.confirm(this,opt,str));});};$.listCounter=function(element,options){var listInfoMarkup,base=this;if(!element){return false;}
base.element=$(element);base.options=$.extend({},{'strings':{'groups':i18n('ILP_GROUPS')}},options);base.list=base.element.children('ul');base.list.find('li').each(function(){var text=$(this).text();if($.trim(text)===''){$(this).remove();}});base.listlength=base.list.children('li').length;if(base.listlength>3){base.list.hide();base.list.next('.list-display').hide();listInfoMarkup='<span class="list-information">'+
base.listlength+' '+ base.options.strings.groups+'</span>';$(listInfoMarkup).insertBefore(base.list).mouseover(function(e){$(this).tooltip('<ul>'+ base.list.html()+'</ul>',e);});}};$.fn.listCounter=function(options){return this.each(function(){new $.listCounter(this,options);});};$.fn.addIcon=function(option){return this.each(function(){new $.addIcon(this,option);});};$.addIcon=function(item,option){var $o=$(item),icon='<span class="ui-icon ui-icon-'+ option+'"></span>';$o.find('>span.ui-icon').remove();if($o.find('>.'+ $.ui_class.hitarea).length){$(icon).insertAfter($o.find('>.'+ $.ui_class.hitarea));return $o;}
if($o.find('>.'+ $.ui_class.empty).length){$(icon).insertAfter($o.find('>.'+ $.ui_class.empty));return $o;}
return $(item).prepend(icon);};$.fn.makeSelectable=function(options){return this.each(function(){new $.makeSelectable(this,options);});};$.makeSelectable=function(item,options){var base=this;base.setup=function(){base.$element=$(item);base.opt=$.extend({callback:null,allselect:true,multiple:true,checkbox:true,nonselects:[],head_element:'th',body_element:'td',attr:'checked',header:'thead > tr',click:'tbody > tr',selectnode:null,newclass:'widget-new',deleteclass:'widget-delete'},options);if(base.opt.header!==null){base.$header=base.$element.find(base.opt.header);}
if(!base.opt.title){base.opt.title='';}
if(!base.opt.column){base.opt.column='prepend';}
base.$rows=$(base.opt.click,base.$element);base.header='<'+ base.opt.head_element+' class="checkbox">'+'<input type="checkbox" />'+ base.opt.title+'</'+ base.opt.head_element+'>';base.column='<'+ base.opt.body_element+' class="checkbox">'+'<input type="checkbox" name="selectable"/>'+'</'+ base.opt.body_element+'>';};base.init=function(){var num=0,len,selectables;base.setup();len=base.opt.nonselects.length;while(num<len){$(base.opt.nonselects[num],base.$element).addClass('non-select ');num+=1;}
if(base.opt.header!==null&&base.opt.checkbox===true){base.allselect=base.opt.column==='prepend'?$(base.header).prependTo(base.$header):$(base.header).appendTo(base.$header);if(base.opt.multiple&&base.opt.allselect){base.allselect.on('click',function(){var select=base.toggleAll(base.$rows);if(select){$(this).children('input').attr(base.opt.attr,base.opt.attr);}else{$(this).children('input').removeAttr(base.opt.attr);}
base.callback();});}else{base.allselect.find(':checkbox').hide();}}
if(base.opt.checkbox){if(base.opt.selectnode!==null){$(base.opt.selectnode,base.$rows).prepend(base.column);}else if(base.opt.column==='prepend'){$(base.$rows).prepend(base.column);}else{$(base.$rows).append(base.column);}
base.$rows.filter('.'+ $.ui_class.selected).find('input:checkbox').attr(base.opt.attr,base.opt.attr);base.$rows.filter('.non-select').find('input:checkbox').disable();}
base.shiftKey=false;$(document).on({'keydown':function(e){base.shiftKey=e.shiftKey;},'keyup':function(e){base.shiftKey=e.shiftKey;}});selectables=base.opt.click+':not(.non-select)';$(base.$element).off('mousedown',selectables,base.checkShift).off('mouseup',selectables,base.checkMultiple).on('click','td input:checkbox',function(e){e.preventDefault();}).on('mousedown',selectables,base.checkShift).on('mouseup',selectables,base.checkMultiple);};base.checkShift=function(){if(base.shiftKey===false){base.mousedownitem=this;}};base.checkMultiple=function(ev){var start,end,el,index,tmp;if(!$.nodeName(ev.target,base.opt.body_element)&&(!$.nodeName(ev.target,'input')||$(ev.target).attr('name')!=='selectable')){return false;}
if(base.opt.multiple){if(base.shiftKey&&base.mousedownitem!==this){start=$(base.opt.click,base.$element).index($(base.mousedownitem));end=$(base.opt.click,base.$element).index($(this));if(start>end){tmp=start;start=end;end=tmp;}
end+=1;base.toggleSelection($(base.mousedownitem));$(base.opt.click,base.$element).slice(start,end).each(function(){if($(this).is(':visible')&&!$(this).is('.non-select')){base.toggleSelection($(this),false,true);}});base.mousedownitem=false;}else if(base.mousedownitem===this&&!base.shiftKey){base.toggleSelection($(this),ev);}else if($(base.opt.click,base.$element).index($(base.mousedownitem))!==-1){el=$(this);index=$(base.opt.click,base.$element).index($(base.mousedownitem));$('.'+ $.ui_class.selected+':not(:eq('+ index+'))',base.$element).each(function(){base.toggleSelection($(this));});base.toggleSelection(el,ev);}}else{base.toggleSelection($(this),ev);}};base.stripClasses=function(){base.$rows.removeClass(base.opt.newclass+' '+ base.opt.deleteclass);};base.toggleAll=function(){var lengthSelectables=base.$rows.filter(':not(.non-select)').find('[name="selectable"]:checked').length;if(base.$rows.length===lengthSelectables){base.$rows.filter(':not(.non-select)').each(function(){base.deselectRow($(this));});return false;}else{base.$rows.filter(':not(.non-select)').each(function(){base.selectRow($(this));});return true;}};base.toggleSelection=function($item,ev,shift){var prev_selected,$row;if(ev){ev.stopPropagation();}
$row=base.opt.selectnode?$(base.opt.selectnode,$item):$item;if($row.is('.'+ $.ui_class.selected)){base.deselectRow($row);}else{if(!base.opt.multiple&&!shift){prev_selected=base.$element.find('.'+ $.ui_class.selected).removeClass($.ui_class.selected);if(base.opt.checkbox){prev_selected.find(':checkbox').removeAttr(base.opt.attr);}}
base.selectRow($row);}
if(base.opt.multiple&&base.opt.checkbox){base.callback();}};base.callback=function(){var wait;if(base.$rows.length===base.$rows.find('[name="selectable"]:checked').length){base.allselect.children('input').attr(base.opt.attr,base.opt.attr);}else{base.allselect.children('input').removeAttr(base.opt.attr);}
if(base.opt.callback&&typeof base.opt.callback==='function'){wait=base.opt.callback(base.$rows);base.stripClasses();}};base.selectRow=function($row){if(!base.opt.multiple){base.$element.find('.'+ base.opt.newclass).removeClass(base.opt.newclass);}
if(!$row.is('.'+ $.ui_class.selected)){if($row.is('.'+ base.opt.deleteclass)){$row.removeClass(base.opt.deleteclass);}else{$row.addClass(base.opt.newclass);}
$row.addClass($.ui_class.selected);$row.children('.checkbox').children(':checkbox').attr(base.opt.attr,base.opt.attr);}};base.deselectRow=function($row){if($row.is('.'+ base.opt.newclass)){$row.removeClass(base.opt.newclass);}else{$row.addClass(base.opt.deleteclass);}
$row.removeClass($.ui_class.selected);if(base.opt.checkbox){$row.children('.checkbox').children(':checkbox').removeAttr(base.opt.attr);}};base.init();};$.fn.addSelectNav=function(){return $(this).each(function(){(new $.addSelectNav('#'+ $(this).attr('id')));});};$.addSelectNav=function(select){var base=this;base.init=function(select){$('<div>',{'class':'left','css':{'cursor':'pointer'},'click':function(){base.nextInSelect(select);}}).insertAfter(select).addIcon('arrow-000-medium');$('<div>',{'class':'left','css':{'cursor':'pointer'},'click':function(){base.prevInSelect(select);}}).insertBefore(select).addIcon('arrow-180-medium');};base.prevInSelect=function(select){var index=$(select+' option').index($(select+' option:selected')),indexLength=$(select+' option').length- 1;if(index<=indexLength&&index!==0){$(select+' option').eq(index- 1).attr('selected','selected');}else{$(select+' option').eq(indexLength).attr('selected','selected');}
$(select).trigger('change');};base.nextInSelect=function(select){var index=$(select+' option').index($(select+' option:selected')),indexLength=$(select+' option').length- 1;if(index<indexLength&&index!==indexLength){$(select+' option').eq(index+ 1).attr('selected','selected');}else{$(select+' option').eq(0).attr('selected','selected');}
$(select).trigger('change');};base.init(select);};$.fn.tooltip=function(text,e,opt){return this.each(function(){new $.tooltip(text,opt,this,e);});};$.tooltip=function(text,opt,element,event){var self=this,tooltipMarkup,currentTitle,limits;self.texts=text;self.element=$(element).addClass('tooltip-item ui-state-hover');self.ev=event;self.opt=$.extend({left_offset:15,top_offset:15,width:350,extra_class:'',blockUI:false,timeout:0,timein:0,posevent:'mousemove',cancel_hide:{'mousemove':500},hide_event:{'mouseenter':0,'mouseleave':0,'click':0},src_hide_event:{'mouseleave':0},no_cover_source:false,onload:function(){},precallback:function(){},oncallback:function(){}},opt);self.callback=false;self.hiding=false;self.showtooltip=function(){clearTimeout(self.timeout);self.tooltipItem.show(self.opt.timein);if(self.opt.blockUI){var position=jQuery('body').css('position'),floating=jQuery('body').css('float'),width=jQuery('body').css('width'),height=jQuery('body').css('height'),bodyCss={'position':position,'float':floating,'width':width,'height':height};setJSONData('body_css',bodyCss);jQuery('body').css({'position':'relative','float':'left','width':'100%','height':'100%'}).append('<div id="overlay"></div>');$('#overlay').css({'top':$(document).scrollTop()});}};self.hidetooltip=function(time){var currentItem=$(document).data('currentItem');if(currentItem.length&&!currentItem.attr('title')){$(document).data('currentItem').attr('title',$(document).data('currentTitle'));}
if(self.opt.precallback){self.opt.precallback(self);}
self.element.removeClass('tooltip-item ui-state-hover');self.timeout=setTimeout(function(){var bodyCss;if(!self.callback){self.opt.oncallback(self);}
self.tooltipItem.remove();if(self.opt.blockUI){bodyCss=getJSONData('body_css');$('body').css({'position':bodyCss.position,'float':bodyCss.float,'width':bodyCss.width,'height':bodyCss.height});$('#overlay').remove();}},time);};self.positioning=function(event){var limits=$.viewport(),boxOffset={left:event.pageX+ self.opt.left_offset,top:event.pageY+ self.opt.top_offset},boxWidth=self.tooltipItem.width(),boxHeight=self.tooltipItem.height(),sourceOffset=self.element.offset(),sourceWidth=self.element.width(),sourceHeight=self.element.height(),reloffX,reloffY,sourceRightEdge,sourceBottomEdge,rectOverlap;limits.minTop=$(document).scrollTop()+ 15;limits.maxTop=$(document).scrollTop()+ limits.cy- 15;limits.minLeft=$(document).scrollLeft()+ 15;limits.maxLeft=$(document).scrollLeft()+ limits.cx- 15;if(self.opt.no_cover_source){sourceRightEdge=sourceOffset.left+ sourceWidth;reloffX=sourceRightEdge- event.pageX;sourceBottomEdge=sourceOffset.top+ sourceHeight;reloffY=sourceBottomEdge- event.pageY;boxOffset.left+=reloffX;boxOffset.top+=reloffY;}
if((boxOffset.top+ boxHeight)>limits.maxTop){boxOffset.top=limits.maxTop- boxHeight;}
if((boxOffset.left+ boxWidth)>limits.maxLeft){boxOffset.left=limits.maxLeft- boxWidth;}
if(boxOffset.top<limits.minTop){boxOffset.top=limits.minTop;}
if(boxOffset.left<limits.minLeft){boxOffset.left=limits.minLeft;}
if(self.opt.no_cover_source){rectOverlap=self.rectOverlap({x:sourceOffset.left,y:sourceOffset.top,width:sourceWidth,height:sourceHeight},{x:boxOffset.left,y:boxOffset.top,width:boxWidth,height:boxHeight});if(rectOverlap.xOverlap){boxOffset.left-=boxWidth-(sourceOffset.left- boxOffset.left);}
if(rectOverlap.yOverlap){boxOffset.top-=boxHeight-(sourceOffset.top- boxOffset.top);}}
if($('html').css('direction')==='rtl'){self.tooltipItem.css({right:limits.cx- boxOffset.left,top:boxOffset.top});}else{self.tooltipItem.css({left:boxOffset.left,top:boxOffset.top});}};self.rectOverlap=function(A,B){var xOverlap=this.valueInRange(A.x,B.x,B.x+ B.width)||this.valueInRange(B.x,A.x,A.x+ A.width),yOverlap=this.valueInRange(A.y,B.y,B.y+ B.height)||this.valueInRange(B.y,A.y,A.y+ A.height);return{'xOverlap':xOverlap,'yOverlap':yOverlap};};self.valueInRange=function(value,min,max){return(value>=min)&&(value<=max);};self.addEvents=function(){if(self.opt.src_hide_event){$.each(self.opt.src_hide_event,function(ev,time){self.element.on(ev,function(){self.hidetooltip(time);});});}
if(self.opt.hide_event){$.each(self.opt.hide_event,function(ev,time){self.tooltipItem.on(ev,function(e){var target=e?e.target:window.event.srcElement;if(self.hiding||(ev==='mouseout'&&target!==this)){return;}
if(target.nodeName!=='INPUT'&&target.nodeName!=='TEXTAREA'){self.hiding=true;self.hidetooltip(time);}});});}
if(self.opt.cancel_hide){$.each(self.opt.cancel_hide,function(ev,time){self.tooltipItem.on(ev,function(){self.hiding=false;self.showtooltip(time);});});}
if(self.opt.posevent){self.element.on(self.opt.posevent,function(e){self.positioning(e);});}};$('.tooltip-box').remove();if(self.element.attr('title')||self.element.parent().attr('summary')){currentTitle=self.element.attr('title')?self.element.attr('title'):self.element.parent().attr('summary');$(document).data('currentItem',self.element).data('currentTitle',currentTitle);self.element.attr('title','');}
if(!self.texts&&$(document).data('currentTitle')){self.texts=$(document).data('currentTitle');}
if(self.texts){tooltipMarkup='<div class="tooltip-box '+ self.opt.extra_class+'">'+'<div class="tooltip-inner">'+ self.texts+'</div>'+'</div>';self.tooltipItem=$(tooltipMarkup).css({'position':'absolute','width':self.opt.width}).appendTo('body').hide();self.opt.onload(self);self.addEvents();limits=$.viewport();self.positioning(self.ev);self.showtooltip();}else{self.element.removeClass('tooltip-item '+ $.ui_class.highlight);}};$.fn.treeview=$.fn.treeView=function(settings,classnames){return this.each(function(){new $.treeView(this,settings,classnames);});};$.treeView=function(element,settings,classnames){var base=this;if(!element){return false;}
base.myid=$(element).attr('id');$(document).data('tree_object',{}).data('in-tree',[]);base.t=$(document).data('tree_object');base.tree=$(document).data('in-tree');base.settings=$.extend({element_tag:'div',strings:{load_warning:'We had some problems with your request. Please try again.'},parameters:{int_template_id:$('#template_id').val(),alphanum_action:'getAvailableGroups',alphanum_clientType:'fronterTree'},type:'group',loadurl:'',toggle:null,onload:null,oncallback:null},settings);base.classnames=$.extend({tree:'widget-treeview',parentclass:'parent'},classnames);base.treeview=($(element).attr('id'))?$('#'+ $(element).attr('id')):$(element);base.hitarea='<'+ base.settings.element_tag+' class="'+ $.ui_class.hitarea+'">'+'</'+ base.settings.element_tag+'>';base.empty='<'+ base.settings.element_tag+' class="'+ $.ui_class.empty+'">'+'</'+ base.settings.element_tag+'>';base.populated=base.treeview.find('li').length>0;base.init=function(){var $items;base.stripClasses();$items=base.treeview.find('li');base.treeview.addClass(base.classnames.tree);base.prepareTreeView($items);$items.filter('li:has(ul:visible)').addClass($.ui_class.open).end().filter('li:has(ul:hidden)').addClass($.ui_class.closed);if(typeof base.settings.onload==='function'){base.settings.onload(base);}
base.addEvents($items.children().children('.'+ $.ui_class.hitarea));};base.addLiHelper=function(key,item){var classes=[],extra=[],ans;if(item.children>0){classes.push(base.classnames.parentclass);}
if(item.type){classes.push(item.type);classes.push('type_'+ item.type);extra.push('rel="'+ item.type+'"');}
if(classes.length>0){extra.push(' class="'+ classes.join(' ')+'"');}
ans='<li id="'+ key+'"'+ extra.join(' ')+'>'+'<span><span class="node-name">'+ item.title+'</span></span>';return ans;};base.populate=function(){$.loading();$.getJSONWrapper({async:false,loading:false,url:base.settings.loadurl,params:base.settings.parameters,success:function(data){var items=[],wait;$.each(data.nodes,function(i,node){items.push(base.addLiHelper(i,node));if(node.children){items.push('<ul style="display:none">');$.each(node.children,function(key,item){items.push(base.addLiHelper(key,item)+'</li>');});items.push('</ul>');}
items.push('</li>');});wait=base.treeview.append(items.join(''));$.loadingEnd();base.populated=true;base.init();}});};base.prepareTreeView=function(nodes){var parents,children;parents=nodes.filter('li:has(ul), li.'+ base.classnames.parentclass).filter(':not(.'+ $.ui_class.treenode+')').addClass($.ui_class.treenode+' '+ $.ui_class.expandable);parents.filter(':has(ul:visible)').addClass($.ui_class.open).end().filter(':not(:has(ul:visible))').addClass($.ui_class.closed);children=nodes.filter('li:not(.'+ $.ui_class.treenode+')').addClass($.ui_class.treenode);parents.children('span').prepend(base.hitarea);children.children('span').prepend(base.empty);nodes.filter('li:last-child').addClass($.ui_class.last);nodes.removeClass($.ui_class.newnode);base.addEvents(parents.find('.'+ $.ui_class.hitarea));if(typeof base.settings.toggle==='function'){base.settings.toggle();}};base.toggleTreeViewBranch=function(branch){var parents,mylist,appending,loadingElement=branch.find('span.node-name').first(),loadingPosition=loadingElement.position(),currentbranch=$(branch),id=base.getID(currentbranch.attr('id'));loadingPosition.left+=loadingElement.width()+ 10;$.loading(loadingPosition);currentbranch.parents('li').show();if(!currentbranch.children('ul').length&&$.inArray(base.myid+'_'+ id,base.tree)===-1&&base.t[base.myid+'_'+ base.settings.type+'_'+ id]){appending=base.appendNewItems(base.t[base.myid+'_'+ base.settings.type+'_'+ id],id);}
parents=base.checkForParents(currentbranch);mylist=currentbranch.children('ul');if(currentbranch.is('.'+ $.ui_class.open)){currentbranch.removeClass($.ui_class.open+' '+ $.ui_class.closed).addClass($.ui_class.closed);mylist.hide();}else{currentbranch.removeClass($.ui_class.closed+' '+ $.ui_class.open).addClass($.ui_class.open);mylist.show();}
if(!parents){$.loadingEnd();}};base.checkForParents=function(branch){var getParents=branch.children('ul').children('.'+ base.classnames.parentclass),getLength=getParents.length,templateNodes,cachedNodes,cacheLength,loadLength,params,load;if(getLength){templateNodes={};cachedNodes={};cacheLength=0;loadLength=0;load=false;$.each(getParents,function(i,item){var id=base.getID($(item).attr('id'));if(!base.t[base.myid+'_'+ base.settings.type+'_'+ id]){templateNodes[i]=$(item).attr('id');load=true;loadLength+=1;}else{cachedNodes[i]=base.settings.type+'_'+ id;cacheLength+=1;}});if(load){params=$.extend({},{json_nodes:$.toJSON(templateNodes)},base.settings.parameters);$.getJSONWrapper({'async':false,'loading':false,'url':base.settings.loadurl,'params':params,'success':function(data){base.extendTree(data.nodes);$.loadingEnd();},'error':function(){$.error(base.settings.strings.load_warning);$.loadingEnd();}});return true;}}
return false;};base.extendTree=function(nodes){var added=[],addedLength;$.each(nodes,function(id,parent){$.each(parent.children,function(){base.t[base.myid+'_'+ base.settings.type+'_'+ base.getID(id)]=parent;added.push(base.getID(id));});});addedLength=added.length;while(addedLength){if($('li[id$=_'+ added[addedLength]+']').is('.'+ $.ui_class.open)){base.appendNewItems(base.t[base.myid+'_'+ base.settings.type+'_'+ added[addedLength]],added[addedLength]);}
addedLength-=1;}};base.getID=function(item){var id=item.split('_');return id[id.length- 1];};base.appendNewItems=function(node,id){var items=[],wait,prepare,waitmore,treenode,getNodeChildAttributes=function(item){var baseClass=(item.children===1)?base.classnames.parentclass+' ':'',itemType=item.type?' '+ item.type+' type_'+ item.type:'',classes=baseClass+ $.ui_class.newnode+ itemType,rel=item.type?item.type:'';return{'classes':classes,'rel':rel};},getNodeChildMarkup=function(id,text,attributes){return'<li id="'+ id+'" '+'class="'+ attributes.classes+'" '+'rel="'+ attributes.rel+'">'+'<span>'+'<span class="node-name">'+ text+'</span>'+'</span>'+'</li>';};base.tree.push(base.myid+'_'+ id);treenode=base.treeview.find('[id$=_'+ base.getID(id)+']');if(node.children){$.each(node.children,function(key,item){var attributes=getNodeChildAttributes(item),markup=getNodeChildMarkup(key,item.title,attributes);items.push(markup);});wait=treenode.append('<ul>'+ items.join('')+'</ul>');}else{treenode.children('span').children('.'+ $.ui_class.hitarea).removeClass($.ui_class.hitarea+' '+
$.ui_class.expandable+' '+
$.ui_class.open+' '+
$.ui_class.closed).addClass($.ui_class.empty);}
treenode.removeClass(base.classnames.parentclass);if(typeof base.settings.oncallback==='function'){waitmore=base.settings.oncallback();}
prepare=base.prepareTreeView(base.treeview.find('li.'+ $.ui_class.newnode));if(typeof base.settings.toggle==='function'){setTimeout(function(){base.settings.toggle();},150);}
return true;};base.clickScript=function(e){e.preventDefault();e.stopPropagation();base.toggleTreeViewBranch($(this).closest('li'));return false;};base.addEvents=function(items){items.off('click').on('click',base.clickScript);};base.stripClasses=function(){base.treeview.find('li, span, div').removeClass(base.classnames.tree+' '+
$.ui_class.open+' '+
$.ui_class.treenode+' '+
$.ui_class.closed+' '+
$.ui_class.expandable+' '+
$.ui_class.selected+' '+
$.ui_class.last+' '+
$.ui_class.hitarea+' '+
$.ui_class.expanded+' '+
$.ui_class.empty+' '+
$.ui_class.newnode+' '+
$.ui_class.loading);};base.close=function(){base.tree=[];base.t={};base.treeview.find('.'+ $.ui_class.hitarea+', .'+ $.ui_class.empty).remove();base.stripClasses();};if(base.populated){base.init();}else{base.populate();}};$.EditableTable=function(table,options){var base=this,$row;base.$table=$('#'+ $(table).attr('id'));base.$tbody=base.$table.find('tbody');base.$rows=base.$tbody.find('tr:not(.locked)');base.$allrows=base.$tbody.find('tr');base.$rowTemplate=base.$tbody.find('tr.template').hide();base.$editing=false;base.addEventHandlers=function(){$(base.$tbody).on('click','.editable-text-container',function(){var $this=$(this),$val,$edit,text;$row=$this.parent('tr');base.toggleSelection($row);if(base.checkForEdits($this)){base.editrow=base.$tbody.find('tr').index($row);base.$editrow=$row;base.$editing=$this.addClass('editing');$edit=$this.children('p');text=$edit.text()||' ';$this.data('original',text);$val=$('<input type="text" class="text editabletext" />');if($.browser.msie){$val.css('width','250px');}
$val.val(text).insertAfter($edit).focus().blur(function(){base.removeEdit();});$edit.hide();return false;}});$(base.$rows).on('mouseover','tr:visible',function(){$(this).addClass(''+ $.ui_class.hover+'');}).on('mouseout','tr:visible',function(){$(this).removeClass(''+ $.ui_class.hover+'');}).on('click','tr:visible',function(){base.toggleSelection($(this));});$(base.$tbody).on('click','span.table-deleterow',function(e){var $this=$(this),$row=$this.parents('tr'),rowid=$row.find('.row-id').val();e.stopPropagation();base.toggleSelection($row);if(base.options.callback!==null){$this.confirm({action:function(){base.options.callback('deleteRow',$row,rowid,function(){$row.remove();if(base.$tbody.find('tr').length===1){base.addInstruction();}});}},{'header':base.options.strings.warning,'text':base.options.strings.deleteText,'ok':base.options.strings.ok,'dont':base.options.strings.cancel});}});$(document).on('click','input.editabletext',function(e){e.stopPropagation();return false;});};base.toggleSelection=function($row){base.$tbody.find('tr.'+ $.ui_class.selected).removeClass($.ui_class.selected);$row.addClass($.ui_class.selected);};base.createNewRow=function(){var element;base.removeEdit();if(base.$norows){base.$norows.remove();base.$norows=false;}
element=base.$rowTemplate.clone().removeAttr('style').removeAttr('class').appendTo(base.$tbody);element.find('ul').empty();element.find('.editable-text-container').trigger('click');return element;};base.addTableFooter=function(){var footerMarkup;if(!base.$table.find('tfoot').length){footerMarkup='<tfoot>'+'<tr>'+'<td colspan="'+ base.$rowTemplate.find('td').length+'">'+'<button class="addtablerow link-button">'+'<span class="ui-icon '+ base.options.addIcon+'"></span>'+'<span>'+ base.options.strings.addText+'</span>'+'</button>'+'</td>'+'</tr>'+'</tfoot>';$(footerMarkup).appendTo(base.$table);$(base.$table).on('click','.addtablerow',function(e){var newrow;e.preventDefault();e.stopPropagation();base.removeEdit();newrow=base.createNewRow();if(typeof base.options.addrowcallback==='function'){base.options.addrowcallback(newrow);}
return false;});}};base.addActionsToRows=function(){base.$table.find('thead > tr').append('<th class="checkbox"></th>');base.$tbody.find('tr').each(function(){var $row=$(this),$markup=$('<td>');if(!$row.hasClass('.locked')){$markup.html('<div class="rowactions">'+'<span class="table-deleterow ui-icon '+
base.options.deleteIcon+'">'+
base.options.strings.deleteText+'</span>'+'</div>');}
$markup.appendTo($row);});};base.addInstruction=function(){var markup='<tr class="noheadings">'+'<td colspan="'+ base.$rowTemplate.find('td').length+'">'+'<div class="notice">'+'<span class="ui-icon"></span>'+
base.options.strings.noRowsText+'</div>'+'</td>'+'</tr>';base.$norows=$(markup).appendTo(base.$tbody);};base.goNext=function(){if(typeof base.$editing.nextAll==='function'&&base.$editing.nextAll(':has(p)').length){base.$editing.nextAll(':has(p)').eq(0).trigger('click');}else{if(base.$rows.eq(base.editrow+ 1).length){base.$rows.eq(base.editrow+ 1).find('td:has(p):first').trigger('click');}else if(base.$editrow&&typeof base.$editrow.nextAll==='function'&&base.$editrow.nextAll(':visible').eq(0).find('td:has(p):first').length){base.$editrow.nextAll(':visible').eq(0).find('td:has(p):first').trigger('click');}else if(base.$editrow&&typeof base.$editrow.siblings==='function'){base.$editrow.siblings(':visible:first').find('td:has(p):first').trigger('click');}}};base.goPrev=function(){if(typeof base.$editing.prevAll==='function'&&base.$editing.prevAll(':has(p)').length){base.$editing.prevAll(':has(p)').eq(0).trigger('click');}else{if(base.$editrow&&typeof base.$editrow.prev==='function'&&base.$editrow.prev(':visible').length){base.$editrow.prev().find('td:has(p):last').trigger('click');}else if(base.$editrow){base.$editrow.siblings(':last').find('td:has(p):last').trigger('click');}}};base.formatTextForViewing=function(string){if(string){return string.replace(/</g,'&lt;').replace(/>/g,'&gt;');}else{return'';}};base.checkForEdits=function(row){if(row&&row.is('.editing')){return false;}
if(base.$editing){base.removeEdit();}
return true;};base.checkForCallback=function(row,edit,input){var callback;if(!row.find('.row-id').val()){if(base.options.callback!==null){if($.trim(input.val())!==''){base.options.callback('addRow',edit,null,function(id){row.find('.row-id').val(id);});}else if(base.options.notifyEmpty){base.options.callback('emptyRow',edit,null,function(id){row.find('.row-id').val(id);});}}}else if(input.val()!==base.$editing.data('original')){if(base.options.callback!==null){if($.trim(input.val())!==''){callback='updateRow';}else if(base.options.notifyEmpty){callback='emptyRow';}
base.options.callback(callback,edit,row.find('.row-id').val());}}};base.removeEdit=function(){var edit,input,row;if(base.$editing){edit=base.$editing;input=edit.children('input.editabletext');row=edit.parent();base.checkForCallback(row,edit,input);if($.trim(input.val())!==''){input.prev().html(base.formatTextForViewing(input.val())).show();input.remove();edit.removeClass('editing');}else if(!row.find('p:visible,input:not([type="hidden"])').length){row.remove();}else{input.prev().html(base.formatTextForViewing(input.val())).show();input.remove();edit.removeClass('editing');}
if(base.$tbody.find('tr').length===1){base.addInstruction();}
base.$editing=false;}};base.init=function(){base.options=$.extend({},$.EditableTable.defaultOptions,options);base.addActionsToRows();if(base.$allrows.length===1){base.addInstruction();}
base.addTableFooter();base.addEventHandlers();if(base.options.onload!==null){base.options.onload(base);}};base.init();};$.EditableTable.defaultOptions={strings:{noRowsText:'You have No Topic Headings',addText:'Create New Topic Heading',saveText:'Save',warning:'Warning',ok:'OK',cancel:'Cancel',deleteText:'Delete Topic Heading'},addIcon:'ui-icon-plus-circle',deleteIcon:'ui-icon-delete',selected:'ui-state-selected',ignore:'locked',callback:null,addrowcallback:null,notifyEmpty:false,onload:null};$.fn.EditableTable=function(options){return this.each(function(){(new $.EditableTable(this,options));});};$.getCookie=function(name){var cookieValue=null,cookies,cookie,i;if(document.cookie&&document.cookie!==''){cookies=document.cookie.split(';');for(i=0;i<cookies.length;i+=1){cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+ 1)===(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+ 1));break;}}}
return cookieValue;};$.setCookie=function(name,value,options){var expires='',date,path,domain,secure;options=options||{};if(value===null){value='';options.expires=-1;}
if(options.expires&&(typeof options.expires==='number'||options.expires.toUTCString)){if(typeof options.expires==='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+ date.toUTCString();}
path=options.path?'; path='+(options.path):'';domain=options.domain?'; domain='+(options.domain):'';secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');};$.cookie=function(name,value,options){if(typeof value!=='undefined'){$.setCookie(name,value,options);}else{return $.getCookie(name);}};function toIntegersAtLease(n){return n<10?'0'+ n:n;}
Date.prototype.toJSON=function(){return this.getUTCFullYear()+'-'+
toIntegersAtLease(this.getUTCMonth())+'-'+
toIntegersAtLease(this.getUTCDate());};$.quoteString=function(string){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};if(escapeable.test(string)){return'"'+ string.replace(escapeable,function(a){var c=meta[a];if(typeof c==='string'){return c;}
c=a.charCodeAt();return'\\u00'+ Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+ string+'"';};$.toJSON=function(o,compact){var type=typeof(o),ret=[],i,k,name,val;if(type==='undefined'){return'undefined';}else if(type==='number'||type==='boolean'){return o+'';}else if(o===null){return'null';}
if(type==='string'){return $.quoteString(o);}
if(type==='object'&&typeof o.toJSON==='function'){return o.toJSON(compact);}
if(type!=='function'&&typeof(o.length)==='number'){for(i=0;i<o.length;i=i+ 1){ret.push($.toJSON(o[i],compact));}
if(compact){return'['+ ret.join(',')+']';}else{return'['+ ret.join(', ')+']';}}
if(type==='function'){throw new TypeError('Unable to convert object of type "function" to json.');}
for(k in o){type=typeof(k);if(type==='number'){name='"'+ k+'"';}else if(type==='string'){name=$.quoteString(k);}else{continue;}
val=$.toJSON(o[k],compact);if(typeof val!=='string'){continue;}
if(compact){ret.push(name+':'+ val);}else{ret.push(name+': '+ val);}}
return'{'+ ret.join(', ')+'}';};$.compactJSON=function(o){return $.toJSON(o,true);};$.evalJSON=function(src){return JSON.parse(src);};$.fn.maxLength=function(max){this.each(function(){var ob,keyCode,hasSelection,type=this.tagName.toLowerCase(),inputType=this.type?this.type.toLowerCase():null;if(type==='input'&&inputType==='text'||inputType==='password'){this.maxLength=max;}else if(type==='textarea'){this.onkeypress=function(e){ob=e|window.event;keyCode=ob.keyCode;hasSelection=document.selection?document.selection.createRange().text.length>0:this.selectionStart!==this.selectionEnd;return!(this.value.length>=max&&(keyCode>50||keyCode===32||keyCode===0||keyCode===13)&&!ob.ctrlKey&&!ob.altKey&&!hasSelection);};this.onkeyup=function(){if(this.value.length>max){this.value=this.value.substring(0,max);}};}});};$.fn.alphanumeric=function(p){p=$.extend({ichars:'!@#$%^&*()+=[]\\\';,/{}|\':<>?~`.- ',nchars:'',allow:''},p);return this.each(function(){var s,reg,ch,i;if(p.nocaps){p.nchars+='ABCDEFGHIJKLMNOPQRSTUVWXYZ';}
if(p.allcaps){p.nchars+='abcdefghijklmnopqrstuvwxyz';}
s=p.allow.split('');for(i=0;i<s.length;i+=1){if(p.ichars.indexOf(s[i])!==-1){s[i]='\\'+ s[i];}}
p.allow=s.join('|');reg=new RegExp(p.allow,'gi');ch=p.ichars+ p.nchars;ch=ch.replace(reg,'');$(this).on('keypress',function(e){var keyPressed=String.fromCharCode(e.charCode||e.which);if(ch.indexOf(keyPressed)!==-1){e.preventDefault();}
if(e.ctrlKey&&keyPressed==='v'){e.preventDefault();}});$(this).on('contextmenu',function(){return false;});});};$.fn.numeric=function(p){var az='abcdefghijklmnopqrstuvwxyz';az+=az.toUpperCase();p=$.extend({'nchars':az},p);return this.each(function(){$(this).alphanumeric(p);});};$.fn.alpha=function(p){var nm='1234567890';p=$.extend({'nchars':nm},p);return this.each(function(){$(this).alphanumeric(p);});};}(jQuery));(function($){$.fn.dropDown=function(settings){return this.each(function(){new $.dropDown(this,settings);});};$.dropDown=function(element,settings){if(!element){return false;}
this.settings=$.extend({fromSelect:false,chosenElement:'dd-option-chosen',optionsElement:'dd-options-holder',oddClass:'odd',waitTimer:500,setStyle:false,animate:false,zebra:false,onload:function(){},callback:function(){}},settings);this.dropdown=$(element);this.init();};$.dropDown.prototype={init:function(){var base=this;if(base.settings.fromSelect){base.buildDropDown();}
base.prepareDropDown();},buildDropDown:function(){var base=this,parent=base.dropdown.parent(),markup='<div class="dd-holder">'+'<div class="'+ base.settings.chosenElement+'">'+'<ul></ul>'+'</div>'+'<div class="'+ base.settings.optionsElement+'">'+'<ul></ul>'+'</div>'+'</div>';$(markup).appendTo(parent);base.dropdown.children().each(function(i,item){var itemMarkup='<li>'+'<a name="'+ $(item).attr('value')+'">'+'<span>'+ $(item).text()+'</span>'+'</a>'+'</li>',appendToElement=$(item).attr('selected')?'chosenElement':'optionsElement';$(itemMarkup).appendTo('.dd-holder .'+ base.settings[appendToElement]+' > ul');});base.dropdown.hide();base.dropdown=$('.dd-holder');},prepareDropDown:function(){var base=this;base.chosen=$(base.dropdown).find('.'+ this.settings.chosenElement);base.options=$(base.dropdown).find('.'+ this.settings.optionsElement);base.options.hide();base.addBehaviour();if(base.settings.setStyle){base.styleDropDown();}
if(base.settings.zebra){base.stripeZebra();}
base.settings.onload();},toggleDropDown:function(e){var base=this;if(base.settings.animate){base.options.toggle(base.settings.animate);}else{base.options.toggle();}
base.positionDropDown(e);},hideDropDown:function(){var base=this;if(base.settings.animate){base.options.hide(base.settings.animate);}else{base.options.hide();}},stripeZebra:function(){var base=this;if(base.options.find('table').length>0){base.options.find('tbody tr:nth-child(odd)').addClass(base.settings.oddClass);}else if(base.options.find('ol, ul').length>0){base.options.find('ul li:odd').addClass(base.settings.oddClass);}},positionDropDown:function(e){var base=this,limits=$.viewport(),optionsElement=$('.'+ base.settings.optionsElement),assertHeight=limits.cy- optionsElement.height();if(e.pageY>assertHeight&&assertHeight>0){optionsElement.css({bottom:$('.'+ base.settings.chosenElement).height()});}},addBehaviour:function(){var base=this;base.dropdown.on('click',function(e){base.toggleDropDown(e);}).on('hover',function(){if(base.timeout){clearTimeout(base.timeout);}},function(){base.timeout=setTimeout(function(){base.hideDropDown();},base.settings.waitTimer);}).find('li').on('click',function(){base.settings.callback(this);});}};$.fn.validation=function(){var validation=0,isValid;$(this).find('.required-field').each(function(){var input=$(this).val();if(!input){$(this).addClass('validation-highlight');validation+=1;}else{$(this).removeClass('validation-highlight');}});isValid=validation===0;$(this).find('.validation-message').toggle(isValid);return isValid;};$.fn.resetValidation=function(){$(this).find('.required-field').removeClass('validation-highlight');$(this).find('.validation-message').hide();return this;};$.fn.equalHeights=function(){var maxheight=0;$(this).children().each(function(){maxheight=($(this).height()>maxheight)?$(this).height():maxheight;});$(this).children().css('height',maxheight);};$.fn.fronterTooltip=function(options){return this.each(function(){var $contentInfoElement;if(typeof options.contentHtml!=='undefined'){options.contentId=$(this).attr('id')+'-tooltipInfo';$contentInfoElement=$('<div />').attr('id',options.contentId).addClass('fronterTooltip-tooltip').appendTo('body').html('<div class="fronterTooltip-content-container">'+
options.contentHtml+'</div>').append('<div class="fronterTooltip-overflow-fadeout"></div>');}
$(this).ezpz_tooltip(options);});};$.fn.ezpz_tooltip=function(options){var settings=$.extend({},$.fn.ezpz_tooltip.defaults,options),checkMaxWidth=function(width){return settings.maxWidth>-1&&width>=settings.maxWidth?settings.maxWidth:width;},checkMaxHeight=function(height){return settings.maxHeight>-1&&height>=settings.maxHeight?settings.maxHeight:height;},getContentId=function(targetId){if(!settings.contentId){var name=targetId.split('-')[0],id=targetId.split('-')[2];return name+'-content-'+ id;}
return settings.contentId;},getElementDimensionsAndPosition=function(element){var offset=$(element).offset(),info={'top':offset.top,'left':offset.left,'width':element.width(),'height':element.height()};return info;},keepInWindow=function(contentInfo){var windowWidth=$(window).width(),windowTop=$(window).scrollTop(),output={};output=contentInfo;if(contentInfo.top<windowTop){output.top=windowTop;}
if((contentInfo.left+ contentInfo.width)>windowWidth){output.left=windowWidth- contentInfo.width;}
if(contentInfo.left<0){output.left=0;}
return output;};return this.each(function(){var content=$('#'+ getContentId(this.id)),$contentContainer=content.children('.fronterTooltip-content-container'),$fadeout=content.children('.fronterTooltip-overflow-fadeout'),onMouseMove=function(e){var contentInfo=getElementDimensionsAndPosition(content),targetInfo=getElementDimensionsAndPosition($(this)),shouldShow;contentInfo=$.fn.ezpz_tooltip.positions[settings.contentPosition](contentInfo,e.pageX,e.pageY,settings.offset,targetInfo);contentInfo=keepInWindow(contentInfo);content.width(checkMaxWidth(contentInfo.width));contentInfo=getElementDimensionsAndPosition(content);contentInfo=$.fn.ezpz_tooltip.positions[settings.contentPosition](contentInfo,e.pageX,e.pageY,settings.offset,targetInfo);contentInfo=keepInWindow(contentInfo);content.height(checkMaxHeight(contentInfo.height));content.css({'top':contentInfo.top,'left':contentInfo.left});settings.showContent(content);shouldShow=settings.fadeout&&$contentContainer.height()>content.height();$fadeout.toggle(shouldShow);},onMouseOver=function(){settings.beforeShow(content,$(this));},targetMousedOver=$(this).on({'mouseover':onMouseOver,'mousemove':onMouseMove});content.width(checkMaxWidth(content.width())).height(checkMaxHeight(content.height()));if(settings.stayOnContent&&this.id){$('#'+ this.id+', #'+ getContentId(this.id)).on({'mouseover':function(){content.css('display','block');},'mouseout':function(){content.css('display','none');settings.afterHide();}});}else{targetMousedOver.mouseout(function(){settings.hideContent(content);settings.afterHide();});}});};$.fn.ezpz_tooltip.positionContent=function(contentInfo,mouseX,mouseY,offset){contentInfo.top=mouseY- offset- contentInfo.height;contentInfo.left=mouseX+ offset;return contentInfo;};$.fn.ezpz_tooltip.positions={};$.fn.ezpz_tooltip.defaults={contentPosition:'aboveRightFollow',stayOnContent:false,offset:10,contentId:'',maxHeight:-1,maxWidth:-1,fadeout:true,beforeShow:function(){},showContent:function(content){content.show();},hideContent:function(content){content.hide();},afterHide:function(){}};$.fn.ezpz_tooltip.positions.aboveFollow=function(contentInfo,mouseX,mouseY,offset){contentInfo.top=mouseY- offset- contentInfo.height;contentInfo.left=mouseX-(contentInfo.width/2);return contentInfo;};$.fn.ezpz_tooltip.positions.aboveRightFollow=function(contentInfo,mouseX,mouseY,offset){contentInfo.top=mouseY- offset- contentInfo.height;contentInfo.left=mouseX+ offset;return contentInfo;};$.fn.ezpz_tooltip.positions.rightFollow=function(contentInfo,mouseX,mouseY,offset){contentInfo.top=mouseY-(contentInfo.height/2);contentInfo.left=mouseX+ offset;return contentInfo;};$.fn.ezpz_tooltip.positions.belowRightFollow=function(contentInfo,mouseX,mouseY,offset){contentInfo.top=mouseY+ offset;contentInfo.left=mouseX+ offset;return contentInfo;};$.fn.ezpz_tooltip.positions.belowFollow=function(contentInfo,mouseX,mouseY,offset){contentInfo.top=mouseY+ offset;contentInfo.left=mouseX-(contentInfo.width/2);return contentInfo;};$.fn.ezpz_tooltip.positions.aboveStatic=function(contentInfo,mouseX,mouseY,offset,targetInfo){contentInfo.top=targetInfo.top- offset- contentInfo.height;contentInfo.left=(targetInfo.left+(targetInfo.width/2))-(contentInfo.width/2);return contentInfo;};$.fn.ezpz_tooltip.positions.rightStatic=function(contentInfo,mouseX,mouseY,offset,targetInfo){contentInfo.top=(targetInfo.top+(targetInfo.height/2))-(contentInfo.height/2);contentInfo.left=targetInfo.left+ targetInfo.width+ offset;return contentInfo;};$.fn.ezpz_tooltip.positions.belowStatic=function(contentInfo,mouseX,mouseY,offset,targetInfo){contentInfo.top=targetInfo.top+ targetInfo.height+ offset;contentInfo.left=(targetInfo.left+(targetInfo.width/2))-(contentInfo.width/2);return contentInfo;};}(jQuery));