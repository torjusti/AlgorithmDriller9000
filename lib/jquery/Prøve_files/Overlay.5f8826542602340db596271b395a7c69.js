Fronter.namespace('Fronter.View').Overlay=(function($){'use strict';var LOADING,makeDefaultSelector=function(containerSelector){return containerSelector+'-overlay';},makeWrapperClass=function(containerId,overlayClass){var wrapperClass;if(!_.isUndefined(overlayClass)){wrapperClass=overlayClass;}else{wrapperClass=makeDefaultSelector(containerId);}
return wrapperClass;},exists=function(containerId,overlayClass){var overlay=$('.'+ makeWrapperClass(containerId,overlayClass));return overlay.length>0;},makeContainerSelector=function(containerId){var container;if(!_.isUndefined(containerId)){container='#'+ containerId;}else{container='body';}
return container;},add=function(options){var message,templateCache,data={},container=makeContainerSelector(options.containerId);if(exists(options.containerId,options.overlayClass)){return;}
if(!_.isUndefined(options.overlayMessage)){data.message=options.overlayMessage;}else{Fronter.I18n.translate('MSG_LOADING',function onTranslationsRecieved(translated){data.message=translated.MSG_LOADING;},true);}
data.domClass=makeWrapperClass(options.containerId,options.overlayClass);Fronter.Mustache.renderTemplateFile('overlay/overlay',data,Fronter.Mustache.TYPE_VIEW,function(overlay){$(overlay).prependTo(container);Fronter.Event.fire(Fronter.Event.Overlay.ADDED);});},change=function(options){var data={},container=makeContainerSelector(options.containerId),domClass=makeWrapperClass(options.containerId,options.overlayClass),overlay=$('.'+ domClass);if(!overlay.length){console.warn('overlay does not exist');return;}
if(!_.isUndefined(options.overlayMessage)){data.message=options.overlayMessage;}else{Fronter.I18n.translate('MSG_LOADING',function onTranslationsRecieved(translated){data.message=translated.MSG_LOADING;},true);}
data.domClass=domClass;Fronter.Mustache.renderTemplateFile('overlay/overlay',data,Fronter.Mustache.TYPE_VIEW,function(newOverlay){overlay.remove();$(newOverlay).prependTo(container);});},remove=function(containerId,overlayClass){var domClass=makeWrapperClass(containerId,overlayClass),overlay=$('.'+ domClass);if(!overlay.length){return;}
overlay.remove();Fronter.Event.fire(Fronter.Event.Overlay.REMOVED);};return{'add':add,'change':change,'remove':remove,'exists':exists};}(jQuery));