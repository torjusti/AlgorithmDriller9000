Fronter.namespace('Fronter.View').SoftAlert=(function($){'use strict';var defaults={template:'static/view/notifications/soft_alert.mustache',displayLength:10000,delay:0},softAlertTemplateCache,onClickSoftAlertClose=function(e){e.preventDefault();$(this).closest('.soft-alert-wrapper').remove();},onRenderSoftAlert=function(contents,data){var duration=(_.isUndefined(data.displayLength))?defaults.displayLength:data.displayLength,softAlert=$(contents).appendTo('body').hide().fadeIn().delay(duration);softAlert.find('.close').on('click',onClickSoftAlertClose);if(duration!==0){softAlert.fadeOut(function onFadeOut(){$(this).remove();});}
if(!_.isUndefined(data.onclick)){softAlert.addClass('clickable').on('click',function onClickSoftAlert(e){$(this).off().find('.close').off().end().remove();data.onclick();});}},renderSoftAlert=function(template,data){Fronter.Mustache.renderTemplate(template,data,function(contents){onRenderSoftAlert(contents,data);});},displayMessage=function(messageObj,template){var delay=(_.isUndefined(messageObj.delay))?defaults.delay:messageObj.delay;if(_.isUndefined(template)){template=defaults.template;}
if(_.isUndefined(softAlertTemplateCache)){$('<div>').load(template,function onTemplateLoad(template){softAlertTemplateCache=template;setTimeout(function(){renderSoftAlert(template,messageObj);},delay);});}else{renderSoftAlert(softAlertTemplateCache,messageObj);}};Fronter.Event.on(Fronter.Event.SOFT_ALERT,displayMessage);return{'displayMessage':displayMessage};}(jQuery));